"use strict";(self.webpackChunkreact_kbzda_1=self.webpackChunkreact_kbzda_1||[]).push([[47],{8165:function(e,s,t){t.r(s),t.d(s,{default:function(){return G}});var n=t(8683),r=t(5671),i=t(3144),o=t(136),a=t(7277),l=t(2791),u=t(9101),c=t(6070),d="MyPost_posts_block__pd08z",h="MyPost_posts__hFu9R",p="MyPost_post__error__mIlwQ",f="MyPost_btn__9xWv0",x="Post_item__Yu4oG",j=t(184);var m=function(e){return(0,j.jsxs)("div",{className:x,children:[(0,j.jsx)("img",{src:"https://i.ytimg.com/vi/6C9PDnU6QI0/maxresdefault.jpg",alt:"avatar"}),e.message,(0,j.jsx)("div",{children:(0,j.jsxs)("span",{children:["Like ",e.likeCount," "]})})]})},v=t(5705),b=t(2947),g=function(e){return(0,j.jsx)(v.J9,{initialValues:{newMessageBody:""},onSubmit:function(s,t){var n,r=t.resetForm;n=s.newMessageBody,e.sendMessage(n),r({values:""})},validationSchema:b.O,children:function(e){var s=e.errors,t=e.touched;return(0,j.jsxs)(v.l0,{children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(v.gN,{name:"newMessageBody",as:"textarea",placeholder:"enter text"}),s.newMessageBody&&t.newMessageBody?(0,j.jsx)("div",{className:p,children:s.newMessageBody}):null]}),(0,j.jsx)("button",{className:f,type:"submit",children:"Send2"})]})}})},_=l.memo((function(e){var s=e.postData.map((function(e){return(0,j.jsx)(m,{message:e.message,id:e.id,likeCount:e.likeCount},e.id)}));return(0,j.jsxs)("div",{className:d,children:[(0,j.jsx)("h3",{children:"My posts"}),(0,j.jsx)(g,{sendMessage:e.addPost}),(0,j.jsx)("div",{className:h,children:s})]})})),y=(0,u.$j)((function(e){return{postData:e.profilePage.postData,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(s){e((0,c.Wl)(s))}}}))(_),P=t(885),k=t(1628),N="ProfileInfo_description_block__4fNv1",M="ProfileInfo_mainPhoto__QU8TO",Z="ProfileInfo_contact__sQB8W",S="ProfileInfo_profileInfo__QG8TK",w="ProfileInfo_profileJob__nLU0G",I=function(e){var s=(0,l.useState)(!1),t=(0,P.Z)(s,2),n=t[0],r=t[1],i=(0,l.useState)(e.status),o=(0,P.Z)(i,2),a=o[0],u=o[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,j.jsxs)("div",{children:[!n&&(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Status: "}),(0,j.jsx)("span",{onClick:function(){r(!0)},children:e.status||"------"})]}),n&&(0,j.jsx)("div",{children:(0,j.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatus(a)},value:a})})]})},A=t(7692),C=function(e){var s=e.contactTitle,t=e.contactValue;return(0,j.jsxs)("div",{className:Z,children:[(0,j.jsxs)("i",{children:[s,": "]}),t]})},F=function(e){var s=e.profile,t=e.isOwner,n=e.goToEditMode;return(0,j.jsxs)("div",{children:[t&&(0,j.jsx)("div",{children:(0,j.jsx)("button",{onClick:n,children:"Edit"})}),(0,j.jsxs)("div",{className:S,children:[(0,j.jsxs)("div",{className:w,children:[(0,j.jsx)("b",{children:"Full name: "}),s.fullName]}),(0,j.jsxs)("div",{className:w,children:[(0,j.jsx)("b",{children:"Looking for a job: "})," ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,j.jsxs)("div",{className:w,children:[(0,j.jsx)("b",{children:"My professional skills: "}),s.lookingForAJobDescription]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"About me:"}),s.aboutMe]})]}),(0,j.jsxs)("div",{className:S,children:[(0,j.jsx)("b",{children:"My contacts: "}),Object.keys(s.contacts).map((function(e){return(0,j.jsx)(C,{contactTitle:e,contactValue:s.contacts[e]},e)}))]})]})},J="ProfileDataForm_form__bHJUz",B=t(7103),D=B.Ry({fullName:B.Z_().required("Name is required"),lookingForAJobDescription:B.Z_().required("Field is required").max(100,"Exceeded maximum number of characters"),aboutMe:B.Z_().required("Field is required").max(100,"Exceeded maximum number of characters")}),O=function(e){var s=e.onSubmit;return(0,j.jsx)(v.J9,{initialValues:e.profile,onSubmit:s,validationSchema:D,children:function(){return(0,j.jsxs)(v.l0,{className:J,children:[(0,j.jsx)("div",{children:(0,j.jsx)("button",{type:"submit",children:"Save"})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{children:[(0,j.jsx)("b",{children:"Full name:"}),(0,j.jsx)(v.gN,{as:"input",type:"text",name:"fullName",placeholder:"Name"}),(0,j.jsx)(v.Bc,{name:"fullName",component:"div"})]}),(0,j.jsxs)("label",{children:[(0,j.jsx)("b",{children:"Looking for a job:"}),(0,j.jsx)(v.gN,{type:"checkbox",name:"lookingForAJob"})]}),(0,j.jsxs)("label",{children:[(0,j.jsx)("b",{children:"My professional skills:"}),(0,j.jsx)(v.gN,{as:"textarea",name:"lookingForAJobDescription",placeholder:"My professional skills"}),(0,j.jsx)(v.Bc,{name:"lookingForAJobDescription",component:"div"})]}),(0,j.jsxs)("label",{children:[(0,j.jsx)("b",{children:"About me:"}),(0,j.jsx)(v.gN,{as:"textarea",name:"aboutMe",placeholder:"About me"}),(0,j.jsx)(v.Bc,{name:"aboutMe",component:"div"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Contacts:"}),(0,j.jsx)("ul",{children:Object.keys(e.profile.contacts).map((function(e){return(0,j.jsx)("li",{children:(0,j.jsxs)("label",{children:[(0,j.jsxs)("b",{children:[e,":"]}),(0,j.jsx)(v.gN,{as:"input",type:"text",name:"contacts."+e,placeholder:e})]})},e)}))})]})]})]})}})},T=function(e){var s=(0,l.useState)(!1),t=(0,P.Z)(s,2),n=t[0],r=t[1];if(!e.profile)return(0,j.jsx)(k.Z,{});return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4YWwJaZ79oIELX6C7q_QtBT3Doab4yGxcvQ&usqp=CAU",alt:"hz"})}),(0,j.jsxs)("div",{className:N,children:[(0,j.jsxs)("div",{className:S,children:[(0,j.jsx)("img",{src:e.profile.photos.small||A,alt:"avatar",className:M}),e.isOwner&&(0,j.jsx)("input",{type:"file",onChange:function(s){s.target.files.length&&e.savePhoto(s.target.files[0])}}),(0,j.jsx)(I,{status:e.status,updateStatus:e.updateStatus})]}),n?(0,j.jsx)(O,{profile:e.profile,onSubmit:function(s){e.saveProfile(s).then((function(){r(!1)})).catch((function(){alert("Invalid url format")}))}}):(0,j.jsx)(F,{profile:e.profile,isOwner:e.isOwner,goToEditMode:function(){r(!0)}})]})]})};var U=function(e){return(0,j.jsxs)("div",{children:[(0,j.jsx)(T,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,j.jsx)(y,{})]})},q=t(7689),z=t(1548),E=t(7781),Q=function(e){(0,o.Z)(t,e);var s=(0,a.Z)(t);function t(){return(0,r.Z)(this,t),s.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,s,t){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,j.jsx)(U,(0,n.Z)((0,n.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(l.Component);var G=(0,E.qC)((0,u.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.userId}}),{getUserProfile:c.et,getStatus:c.lR,updateStatus:c.Nf,savePhoto:c.Ju,saveProfile:c.Ii}),(function(e){return function(s){var t=(0,q.TH)(),r=(0,q.s0)(),i=(0,q.UO)();return(0,j.jsx)(e,(0,n.Z)((0,n.Z)({},s),{},{router:{location:t,navigate:r,params:i}}))}}),z.Z)(Q)},1548:function(e,s,t){var n=t(8683),r=t(5671),i=t(3144),o=t(136),a=t(7277),l=t(2791),u=t(7689),c=t(9101),d=t(184),h=function(e){return{isAuth:e.auth.isAuth}};s.Z=function(e){var s=function(s){(0,o.Z)(l,s);var t=(0,a.Z)(l);function l(){return(0,r.Z)(this,l),t.apply(this,arguments)}return(0,i.Z)(l,[{key:"render",value:function(){return this.props.isAuth?(0,d.jsx)(e,(0,n.Z)({},this.props)):(0,d.jsx)(u.Fg,{to:"/login"})}}]),l}(l.Component);return(0,c.$j)(h)(s)}}}]);
//# sourceMappingURL=47.6c2e3a1a.chunk.js.map